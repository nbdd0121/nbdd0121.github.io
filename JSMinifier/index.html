<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="../libs/orion/built-editor.css"/>
<script src="NorlitJSCompiler.js"></script>
<script src="../jquery/jquery.js"></script>
<script src="../libs/orion/built-editor.js"></script>
<script src="../libs/orion/custom-editor.js"></script>
<script src="../jquery/jquery-orion.js"></script>
<script>
	$(function(){
		$("#text").orion();
		editor=$("#text")[0].orion;
	});
	var editor;
</script>
<script>
	function minify(){
		editor.removeAllAnnotationMarks();
		try{
			var str=NorlitJSCompiler.minify($('#text').orion('text'));
			$('#text').orion('text', str);
			$('.x-statusbar').text("Minified without error(s)");
		}catch(e){
			if(e instanceof SyntaxError){
				editor.addAnnotationMark('error', e.toString(), e.detail.startOffset, e.detail.endOffset);
				$('.x-statusbar').text(e.toString());
			}else{
				$('.x-statusbar').text('Please report to the author: '+e);
				console.log(e.stack);
				throw e;
			}
		}
	}
</script>
<style>
	*{
		box-sizing:border-box;
	}
	html, body{
		height: 100%;
		margin: 0;
		padding: 0;
		overflow-y: hidden;
	}
	.x-titlebar{
		background: #2b579a;
		width:100%;
		height:50px;
		color:white;
		padding-left:20px;
		cursor:default;
		-webkit-user-select: none;
		box-sizing:border-box;
	}
	.x-titlebar .title{
		font-size: 24px;
		line-height: 50px;
	}
	.x-menubar{
		background: white;
		width:100%;
		height:30px;
		border-bottom: lightgrey solid 1px;
		-webkit-user-select: none;
		color:#444444;
		cursor:default;
		box-sizing:border-box;
	}
	.x-menubar .tabbutton{
		display: inline-block;
		height: 30px;
		line-height: 30px;
		font-size: 12px;
		padding-left: 8px;
		padding-right: 8px;
	}
	.x-menubar .tabbutton:first-child{
		padding-left: 20px;
		padding-right: 20px;
	}
	.x-menubar .tabbutton:hover{
		background: #d5e1f2;
		color:rgb(43, 87, 154);
	}
	.x-main{
		width:100%;
		height:calc(100% - 102px);
	}
	.x-statusbar {
		position: absolute;
		top:auto;
		bottom:0px;
		height:22px;
		width: 100%;
		background: white;
		font-size: 12px;
		color:rgb(68, 68, 68);
		line-height: 22px;
		border-top:lightgrey solid 1px;
		padding-left:10px;
		box-sizing:border-box;
	}

	#text{
		margin: 0px;
		padding: 0px;
		width: 100%;
		height:100%;
		font-size:14px;
	}
</style>
</head>
<body>
<div class="x-titlebar">
	<span class="title">Norlit JS Compiler Tools<span style="font-size:15px;"> Beta</span></span>
</div>
<div class="x-menubar">
	<span class="tabbutton" onclick="minify()">MINIFY</span>
</div>
<div class="x-main">
<pre id="text" class="editor">
</pre>
</div>
<div class="x-statusbar">
	Ready
</div>
</body>
</html>
